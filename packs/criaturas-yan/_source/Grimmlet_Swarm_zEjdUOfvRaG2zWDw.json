{
  "name": "Grimmlet Swarm",
  "type": "npc",
  "flags": {
    "plutonium": {
      "page": "bestiary.html",
      "source": "ToB2",
      "hash": "grimmlet%20swarm_tob2"
    }
  },
  "_id": "zEjdUOfvRaG2zWDw",
  "img": "https://raw.githubusercontent.com/TheGiddyLimit/homebrew/master/_img/ToB2/creature/Grimmlet%20Swarm.webp",
  "system": {
    "currency": {
      "pp": 0,
      "gp": 0,
      "ep": 0,
      "sp": 0,
      "cp": 0
    },
    "abilities": {
      "str": {
        "value": 17,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      },
      "dex": {
        "value": 12,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      },
      "con": {
        "value": 19,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      },
      "int": {
        "value": 3,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      },
      "wis": {
        "value": 10,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      },
      "cha": {
        "value": 18,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      }
    },
    "bonuses": {
      "mwak": {
        "attack": "",
        "damage": ""
      },
      "rwak": {
        "attack": "",
        "damage": ""
      },
      "msak": {
        "attack": "",
        "damage": ""
      },
      "rsak": {
        "attack": "",
        "damage": ""
      },
      "abilities": {
        "check": "",
        "save": "",
        "skill": ""
      },
      "spell": {
        "dc": ""
      }
    },
    "skills": {
      "acr": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "ani": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "arc": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "ath": {
        "ability": "str",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "dec": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "his": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "ins": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "itm": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "inv": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "med": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "nat": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "prc": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "prf": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "per": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "rel": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "slt": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "ste": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "sur": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      }
    },
    "tools": {},
    "spells": {
      "spell1": {
        "value": 0,
        "override": null
      },
      "spell2": {
        "value": 0,
        "override": null
      },
      "spell3": {
        "value": 0,
        "override": null
      },
      "spell4": {
        "value": 0,
        "override": null
      },
      "spell5": {
        "value": 0,
        "override": null
      },
      "spell6": {
        "value": 0,
        "override": null
      },
      "spell7": {
        "value": 0,
        "override": null
      },
      "spell8": {
        "value": 0,
        "override": null
      },
      "spell9": {
        "value": 0,
        "override": null
      },
      "pact": {
        "value": 0,
        "override": null
      },
      "spell0": {
        "value": 0,
        "override": null
      }
    },
    "attributes": {
      "init": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonus": "0"
      },
      "movement": {
        "burrow": null,
        "climb": null,
        "fly": 30,
        "swim": null,
        "walk": 0,
        "units": "ft",
        "hover": true
      },
      "attunement": {
        "max": 3
      },
      "senses": {
        "darkvision": 0,
        "blindsight": 120,
        "tremorsense": 0,
        "truesight": 0,
        "units": "ft",
        "special": ""
      },
      "spellcasting": "cha",
      "exhaustion": 0,
      "concentration": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonuses": {
          "save": ""
        },
        "limit": 1
      },
      "ac": {
        "flat": 15,
        "calc": "natural"
      },
      "hp": {
        "value": 152,
        "max": 152,
        "temp": 0,
        "tempmax": 0,
        "formula": "16d10 + 64"
      },
      "death": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "success": 0,
        "failure": 0
      }
    },
    "details": {
      "biography": {
        "value": "<div class=\"rd__b  rd__b--1\"><div class=\"float-clear\"></div><div><div class=\"rd__wrp-image relative\">\n\t\t\t<a href=\"https://raw.githubusercontent.com/TheGiddyLimit/homebrew/master/_img/ToB2/creature/Grimmlet%20Swarm.webp\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t<img class=\"rd__image\" src=\"https://raw.githubusercontent.com/TheGiddyLimit/homebrew/master/_img/ToB2/creature/Grimmlet%20Swarm.webp\" />\n\t\t\t</a>\n\t\t</div></div></div><div class=\"rd__b  rd__b--1\"><div class=\"rd__b  rd__b--2\"><div class=\"rd__quote\"><p class=\"rd__quote-line \">“<i>A jagged shard of smoky translucent crystal, approximately the size and mass of a housecat, hovers silently across the field.</i>”</p></div><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">Strange Families.</span></span> <p>Grimmlets reproduce by creating near clones of themselves when injured by arcane energy, leading them to quickly gather in large familial swarms. Strangely, a @creature[grimmlet|ToB2] can only swarm with other grimmlets created from the same progenitor grimmlet, which leads the swarm. Not long after the swarm forms, it disperses, each grimmlet moving on to create new swarms through magic injury.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"2\"> <span class=\"entry-title-inner\">Whispering Menace.</span></span> <p>Grimmlets do not speak. In fact, they never communicate with other creatures via any known form of language or telepathy, though they do seem to understand creatures of the Void. Despite this, the air around a grimmlet mutters and whispers at all times in a foul-sounding invocation. When the creature uses its innate magic, these whispers rise in volume slightly, giving canny listeners a split-second warning that something, likely unpleasant, is about to occur.</p><div class=\"rd__spc-inline-post\"></div></div></div></div><div class=\"rd__b-special rd__b-inset \"><span class=\"rd__h rd__h--2-inset\" data-title-index=\"3\"><h4 class=\"entry-title-inner\">Grimmlets in Midgard</h4><span class=\"ve-flex-vh-center\"><span class=\"rd__h-toggle ml-2 clickable no-select no-print lst-is-exporting-image__hidden\" data-rd-h-special-toggle-button=\"true\" title=\"Toggle Visibility (CTRL to Toggle All)\">[–]</span></span></span><p>Grimmlets arrive in the mortal realm from the same portion of the Void that spawned the Waste Walker Kb'r'ck of Crystal. Grimmlets were named in honor of the unfortunate tracker who discovered them, Aleksei Grimmczyk. Aleksei did not survive this initial meeting, but his demise was recounted by his friend, the elfmarked mage Alethrie.</p><div class=\"float-clear\"></div></div>",
        "public": ""
      },
      "alignment": "unaligned",
      "race": null,
      "type": {
        "value": "monstrosity",
        "subtype": "swarm",
        "swarm": "tiny"
      },
      "environment": "Badlands",
      "cr": 14,
      "spellLevel": 0,
      "source": {
        "book": "ToB2",
        "page": "187",
        "custom": "",
        "license": ""
      }
    },
    "resources": {
      "legact": {
        "value": 0,
        "max": 0
      },
      "legres": {
        "value": 0,
        "max": 0
      },
      "lair": {
        "value": false,
        "initiative": 20
      }
    },
    "traits": {
      "size": "lg",
      "di": {
        "bypasses": [],
        "value": [
          "psychic"
        ],
        "custom": ""
      },
      "dr": {
        "bypasses": [],
        "value": [
          "bludgeoning",
          "piercing",
          "slashing"
        ],
        "custom": ""
      },
      "dv": {
        "bypasses": [],
        "value": [],
        "custom": ""
      },
      "dm": {
        "amount": {},
        "bypasses": []
      },
      "ci": {
        "value": [
          "blinded",
          "charmed",
          "deafened",
          "frightened",
          "grappled",
          "paralyzed",
          "petrified",
          "poisoned",
          "prone",
          "restrained",
          "stunned"
        ],
        "custom": ""
      },
      "languages": {
        "value": [],
        "custom": "understands Void Speech but can't speak"
      }
    }
  },
  "prototypeToken": {
    "name": "Grimmlet Swarm",
    "displayName": 20,
    "actorLink": false,
    "appendNumber": false,
    "prependAdjective": false,
    "texture": {
      "src": "https://raw.githubusercontent.com/TheGiddyLimit/homebrew/master/_img/ToB2/creature/token/Grimmlet%20Swarm%20%28Token%29.png",
      "scaleX": 1,
      "scaleY": 1,
      "offsetX": 0,
      "offsetY": 0,
      "rotation": 0
    },
    "width": 2,
    "height": 2,
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 20,
    "bar1": {
      "attribute": "attributes.hp"
    },
    "bar2": {
      "attribute": "skills.prc.passive"
    },
    "light": {
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      }
    },
    "sight": {
      "enabled": true,
      "range": 120,
      "angle": 360,
      "visionMode": "basic",
      "color": null,
      "attenuation": 0.1,
      "brightness": 0,
      "saturation": -1,
      "contrast": 0
    },
    "detectionModes": [
      {
        "id": "blindsight",
        "range": 120,
        "enabled": true
      }
    ],
    "flags": {},
    "randomImg": false
  },
  "items": [
    {
      "_id": "QXrCITHODovTnkOc",
      "name": "Multiattack",
      "type": "feat",
      "system": {
        "source": {
          "custom": "",
          "book": "ToB2",
          "page": "187",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>The grimmlet swarm makes two attacks with its crystal edges.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "save": {
          "scaling": "flat",
          "ability": "",
          "dc": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "target": {
          "prompt": true,
          "value": null,
          "width": null,
          "units": "",
          "type": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "recharge": {
          "charged": false,
          "value": null
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "cover": null,
        "crewed": false,
        "ability": null,
        "summons": null,
        "requirements": ""
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "icons/skills/melee/strike-weapons-orange.webp",
      "flags": {
        "plutonium": {
          "page": "monsterAction",
          "source": "ToB2",
          "hash": "multiattack_grimmlet%20swarm_tob2_tob2"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611208,
        "modifiedTime": 1722772611208,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.QXrCITHODovTnkOc"
    },
    {
      "system": {
        "type": {
          "value": "natural",
          "baseItem": ""
        },
        "damage": {
          "parts": [
            [
              "4d8",
              "slashing"
            ]
          ],
          "versatile": ""
        },
        "source": {
          "custom": "",
          "book": "ToB2",
          "page": "187",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p><i>Melee Weapon Attack:</i> [[/r 1d20+8]]{+8} to hit, reach 0 ft., one creature in the swarm's space. <i>Hit:</i> 18 ([[/damage 4d8 type=slashing]]) damage, or 9 ([[/damage 2d8]]) damage if the swarm has half of its hp or fewer. The target must make a [[/save ability=intelligence dc=17]] saving throw, taking 21 ([[/damage 6d6 type=psychic]]) damage on a failed save, or half as much damage on a successful one.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "range": {
          "value": 0,
          "long": null,
          "units": "ft"
        },
        "proficient": 1,
        "save": {
          "ability": "int",
          "dc": 17,
          "scaling": "cha"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "target": {
          "value": 1,
          "type": "creature",
          "prompt": true,
          "width": null,
          "units": ""
        },
        "ability": "str",
        "actionType": "mwak",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "2d8 + (6d6)[psychic]",
        "properties": [],
        "identified": true,
        "unidentified": {
          "description": ""
        },
        "container": null,
        "quantity": 1,
        "weight": 0,
        "price": {
          "value": 0,
          "denomination": "gp"
        },
        "rarity": "",
        "attunement": 0,
        "equipped": true,
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "summons": null,
        "armor": {
          "value": null
        },
        "hp": {
          "value": null,
          "max": null,
          "dt": null,
          "conditions": ""
        },
        "magicalBonus": null
      },
      "_id": "TMLA0ox14s0B7IRv",
      "name": "Crystal Edges",
      "type": "weapon",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "modules/plutonium/media/icon/sword-brandish.svg",
      "flags": {
        "plutonium": {
          "page": "monsterAction",
          "source": "ToB2",
          "hash": "crystal%20edges_grimmlet%20swarm_tob2_tob2"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611245,
        "modifiedTime": 1722772611245,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.TMLA0ox14s0B7IRv"
    },
    {
      "_id": "JiruqG723vZxUTC2",
      "name": "Enervating Maelstrom",
      "type": "feat",
      "system": {
        "source": {
          "custom": "",
          "book": "ToB2",
          "page": "187",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>When the grimmlet swarm dies, it explodes in a plume of ennui. Each creature within 20 feet of the grimmlet swarm must make a [[/save ability=dexterity dc=17]] saving throw. On a failure, a creature takes 21 ([[/damage 6d6 type=psychic]]) damage and suffers one level of &amp;Reference[condition=exhaustion]. On a success, a creature takes half the damage and doesn't suffer &amp;Reference[condition=exhaustion]. @creature[grimmlet|ToB2|Grimmlets] damaged by this trait don't Reproduce.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "damage": {
          "parts": [
            [
              "6d6",
              "psychic"
            ]
          ],
          "versatile": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "range": {
          "units": "",
          "value": null,
          "long": null
        },
        "save": {
          "ability": "dex",
          "dc": 17,
          "scaling": "cha"
        },
        "activation": {
          "type": "",
          "cost": null,
          "condition": ""
        },
        "target": {
          "prompt": true,
          "value": null,
          "width": null,
          "units": "",
          "type": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "recharge": {
          "charged": false,
          "value": null
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "cover": null,
        "crewed": false,
        "ability": null,
        "summons": null,
        "requirements": ""
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "systems/dnd5e/icons/svg/items/feature.svg",
      "flags": {
        "midiProperties": {
          "nodam": true
        },
        "plutonium": {
          "page": "monsterTrait",
          "source": "ToB2",
          "hash": "enervating%20maelstrom_grimmlet%20swarm_tob2_tob2"
        }
      },
      "effects": [
        {
          "name": "Enervating Maelstrom",
          "icon": "systems/dnd5e/icons/svg/items/feature.svg",
          "changes": [
            {
              "key": "StatusEffect",
              "mode": 0,
              "value": "Convenient Effect: Exhaustion",
              "priority": 4
            }
          ],
          "disabled": false,
          "duration": {
            "startTime": null,
            "seconds": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "origin": null,
          "transfer": false,
          "flags": {
            "plutonium": {
              "dedupeId": "enervating-maelstrom"
            }
          },
          "_id": "SCtrwrrnwthJ2vBy",
          "description": "",
          "statuses": [],
          "_key": "!actors.items.effects!zEjdUOfvRaG2zWDw.JiruqG723vZxUTC2.SCtrwrrnwthJ2vBy"
        }
      ],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611311,
        "modifiedTime": 1722772611311,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.JiruqG723vZxUTC2"
    },
    {
      "_id": "jdCzqHgLUnTukr0o",
      "name": "Maze of Edges",
      "type": "feat",
      "system": {
        "source": {
          "custom": "",
          "book": "ToB2",
          "page": "187",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>A creature that attempts to move out of or through the grimmlet swarm must succeed on a [[/save ability=dexterity dc=15]] saving throw or take 9 ([[/damage 2d8 type=slashing]]) damage.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "damage": {
          "parts": [
            [
              "2d8",
              "slashing"
            ]
          ],
          "versatile": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "range": {
          "units": "",
          "value": null,
          "long": null
        },
        "save": {
          "ability": "dex",
          "dc": 15,
          "scaling": "flat"
        },
        "activation": {
          "type": "",
          "cost": null,
          "condition": ""
        },
        "target": {
          "prompt": true,
          "value": null,
          "width": null,
          "units": "",
          "type": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "recharge": {
          "charged": false,
          "value": null
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "cover": null,
        "crewed": false,
        "ability": null,
        "summons": null,
        "requirements": ""
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "systems/dnd5e/icons/svg/items/feature.svg",
      "flags": {
        "midiProperties": {
          "nodam": true
        },
        "plutonium": {
          "page": "monsterTrait",
          "source": "ToB2",
          "hash": "maze%20of%20edges_grimmlet%20swarm_tob2_tob2"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611339,
        "modifiedTime": 1722772611339,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.jdCzqHgLUnTukr0o"
    },
    {
      "_id": "LOeS86QivsNwCvtO",
      "name": "Swarm",
      "type": "feat",
      "system": {
        "source": {
          "custom": "",
          "book": "ToB2",
          "page": "187",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>The grimmlet swarm can occupy another creature's space and vice versa, and the swarm can move through any opening large enough for a Tiny @creature[grimmlet|ToB2]. The swarm can't regain hp or gain temporary hp.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "range": {
          "units": "",
          "value": null,
          "long": null
        },
        "save": {
          "scaling": "flat",
          "ability": "",
          "dc": null
        },
        "activation": {
          "type": "",
          "cost": null,
          "condition": ""
        },
        "target": {
          "prompt": true,
          "value": null,
          "width": null,
          "units": "",
          "type": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "recharge": {
          "charged": false,
          "value": null
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "cover": null,
        "crewed": false,
        "ability": null,
        "summons": null,
        "requirements": ""
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "icons/magic/air/wind-swirl-pink-purple.webp",
      "flags": {
        "plutonium": {
          "page": "monsterTrait",
          "source": "ToB2",
          "hash": "swarm_grimmlet%20swarm_tob2_tob2"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611360,
        "modifiedTime": 1722772611360,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.LOeS86QivsNwCvtO"
    },
    {
      "name": "Hallucinatory Terrain",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "249",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>You make natural terrain in a 150-foot cube in range look, sound, and smell like some other sort of natural terrain. Thus, open fields or a road can be made to resemble a swamp, hill, crevasse, or some other difficult or impassable terrain. A pond can be made to seem like a grassy meadow, a precipice like a gentle slope, or a rock-strewn gully like a wide and smooth road. Manufactured structures, equipment, and creatures within the area aren't changed in appearance.</p><div class=\"rd__spc-inline-post\"></div><p>The tactile characteristics of the terrain are unchanged, so creatures entering the area are likely to see through the illusion. If the difference isn't obvious by touch, a creature carefully examining the illusion can attempt an Intelligence (&amp;Reference[skill=Investigation]) check against your spell save DC to disbelieve it. A creature who discerns the illusion for what it is, sees it as a vague image superimposed on the terrain.</p></div>",
          "chat": ""
        },
        "actionType": "util",
        "level": 4,
        "school": "ill",
        "properties": [
          "vocal",
          "somatic",
          "material"
        ],
        "materials": {
          "value": "a stone, a twig, and a bit of green plant",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 150,
          "units": "ft",
          "type": "cube",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 300,
          "units": "ft",
          "long": null
        },
        "activation": {
          "type": "minute",
          "cost": 10,
          "condition": ""
        },
        "duration": {
          "value": "24",
          "units": "hour"
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "save": {
          "dc": null,
          "scaling": "cha",
          "ability": ""
        },
        "ability": "cha",
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/nature/tree-twisted-glow-yellow.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "hallucinatory%20terrain_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "_id": "IyXSGj89SDAM8ltB",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611403,
        "modifiedTime": 1722772611403,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.IyXSGj89SDAM8ltB"
    },
    {
      "name": "Hypnotic Pattern",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "252",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>You create a twisting pattern of colors that weaves through the air inside a 30-foot cube within range. The pattern appears for a moment and vanishes. Each creature in the area who sees the pattern must make a Wisdom saving throw. On a failed save, the creature becomes &amp;Reference[condition=charmed] for the duration. While &amp;Reference[condition=charmed] by this spell, the creature is &amp;Reference[condition=incapacitated] and has a speed of 0.</p><div class=\"rd__spc-inline-post\"></div><p>The spell ends for an affected creature if it takes any damage or if someone else uses an action to shake the creature out of its stupor.</p></div>",
          "chat": ""
        },
        "actionType": "save",
        "level": 3,
        "school": "ill",
        "properties": [],
        "materials": {
          "value": "A glowing stick of incense or a crystal vial filled with phosphorescent material.",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 30,
          "units": "ft",
          "type": "cube",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 120,
          "units": "ft",
          "long": 0
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "ability": "",
        "uses": {
          "value": 0,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "prepared",
          "prepared": false
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/control/hypnosis-mesmerism-swirl.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "hypnotic%20pattern_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        },
        "dynamiceffects": {
          "equipActive": true,
          "alwaysActive": false,
          "effects": [
            {
              "modSpecKey": "flags.dnd5e.conditions",
              "value": "Charmed",
              "mode": "+",
              "targetSpecific": false,
              "id": 1,
              "itemId": "giMYGgLa3Vy20LWh",
              "active": true,
              "_targets": []
            }
          ]
        },
        "dae": {
          "activeEquipped": false,
          "alwaysActive": false
        },
        "midi-qol": {
          "onUseMacroName": "",
          "effectActivation": false
        },
        "dnd5e": {
          "migratedProperties": [
            "somatic",
            "material",
            "concentration"
          ]
        }
      },
      "effects": [
        {
          "name": "Charmed",
          "icon": "icons/magic/control/hypnosis-mesmerism-swirl.webp",
          "changes": [
            {
              "key": "StatusEffect",
              "mode": 0,
              "value": "Convenient Effect: Charmed",
              "priority": 20
            }
          ],
          "disabled": false,
          "duration": {
            "startTime": null,
            "seconds": null,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "origin": null,
          "transfer": false,
          "flags": {
            "dae": {
              "selfTarget": null,
              "selfTargetAlways": null
            },
            "plutonium": {
              "dedupeId": "charmed"
            }
          },
          "_id": "vf8qXWho8hhViUVl",
          "tint": null,
          "description": "",
          "statuses": [],
          "_key": "!actors.items.effects!zEjdUOfvRaG2zWDw.JW3Ao9UnEVwOnVJo.vf8qXWho8hhViUVl"
        }
      ],
      "_id": "JW3Ao9UnEVwOnVJo",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611447,
        "modifiedTime": 1722772611447,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.JW3Ao9UnEVwOnVJo"
    },
    {
      "name": "Lightning Bolt",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "255",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>A stroke of lightning forming a line 100 feet long and 5 feet wide blasts out from you in a direction you choose. Each creature in the line must make a Dexterity saving throw. A creature takes [[/damage 8d6 type=lightning]] damage on a failed save, or half as much damage on a successful one.</p><div class=\"rd__spc-inline-post\"></div><p>The lightning ignites flammable objects in the area that aren't being worn or carried.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 4th level or higher, the damage increases by [[/damage 1d6]] for each slot level above 3rd.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "actionType": "save",
        "level": 3,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic",
          "material"
        ],
        "materials": {
          "value": "a bit of fur and a rod of amber, crystal, or glass",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 100,
          "units": "ft",
          "type": "line",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 0,
          "units": "",
          "long": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "damage": {
          "parts": [
            [
              "8d6",
              "lightning"
            ]
          ],
          "versatile": ""
        },
        "scaling": {
          "mode": "level",
          "formula": "1d6"
        },
        "save": {
          "ability": "dex",
          "dc": null,
          "scaling": "cha"
        },
        "ability": "cha",
        "uses": {
          "value": 3,
          "max": "3",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/lightning/bolt-blue.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "lightning%20bolt_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "_id": "M2qJXMqZ0Wuf5cX9",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611486,
        "modifiedTime": 1722772611486,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.M2qJXMqZ0Wuf5cX9"
    },
    {
      "name": "Major Image",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "258",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>You create the image of an object, a creature, or some other visible phenomenon that is no larger than a 20-foot cube. The image appears at a spot that you can see within range and lasts for the duration. It seems completely real, including sounds, smells, and temperature appropriate to the thing depicted. You can't create sufficient heat or cold to cause damage, a sound loud enough to deal thunder damage or deafen a creature, or a smell that might sicken a creature (like a @creature[troglodyte||troglodyte's] stench).</p><div class=\"rd__spc-inline-post\"></div><p>As long as you are within range of the illusion, you can use your action to cause the image to move to any other spot within range. As the image changes location, you can alter its appearance so that its movements appear natural for the image. For example, if you create an image of a creature and move it, you can alter the image so that it appears to be walking. Similarly, you can cause the illusion to make different sounds at different times, even making it carry on a conversation, for example.</p><p>Physical interaction with the image reveals it to be an illusion, because things can pass through it. A creature that uses its action to examine the image can determine that it is an illusion with a successful Intelligence (&amp;Reference[skill=Investigation]) check against your spell save DC. If a creature discerns the illusion for what it is, the creature can see through the image, and its other sensory qualities become faint to the creature.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 6th level or higher, the spell lasts until dispelled, without requiring your @status[concentration].</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "actionType": "util",
        "level": 3,
        "school": "ill",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "a bit of fleece",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 20,
          "units": "ft",
          "type": "cube",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 120,
          "units": "ft",
          "long": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "save": {
          "dc": null,
          "scaling": "cha",
          "ability": ""
        },
        "ability": "cha",
        "uses": {
          "value": 3,
          "max": "3",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/nature/mushrooms-fire-glow-blue.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "major%20image_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "_id": "bsj9Kx3VfvcWCggF",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611521,
        "modifiedTime": 1722772611521,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.bsj9Kx3VfvcWCggF"
    },
    {
      "name": "Color Spray",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "222",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>A dazzling array of flashing, colored light springs from your hand. Roll [[/r 6d10]]; the total is how many hit points of creatures this spell can effect. Creatures in a 15-foot cone originating from you are affected in ascending order of their current hit points (ignoring &amp;Reference[condition=unconscious] creatures and creatures that can't see).</p><div class=\"rd__spc-inline-post\"></div><p>Starting with the creature that has the lowest current hit points, each creature affected by this spell is &amp;Reference[condition=blinded] until the end of your next turn. Subtract each creature's hit points from the total before moving on to the creature with the next lowest hit points. A creature's hit points must be equal to or less than the remaining total for that creature to be affected.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, roll an additional [[/r 2d10]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "actionType": "util",
        "level": 1,
        "school": "ill",
        "properties": [
          "vocal",
          "somatic",
          "material"
        ],
        "materials": {
          "value": "a pinch of powder or sand that is colored red, yellow, and blue",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 15,
          "units": "ft",
          "type": "cone",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 0,
          "units": "",
          "long": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "round"
        },
        "damage": {
          "parts": [
            [
              "6d10",
              "midi-none"
            ]
          ],
          "versatile": ""
        },
        "scaling": {
          "mode": "level",
          "formula": "2d10"
        },
        "save": {
          "dc": null,
          "scaling": "cha",
          "ability": ""
        },
        "ability": "cha",
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/unholy/strike-beam-blood-large-red-blue.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "color%20spray_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        },
        "midi-qol": {
          "onUseMacroName": "[postActiveEffects]ItemMacro",
          "forceCEOff": true
        },
        "itemacro": {
          "macro": {
            "_id": null,
            "name": "-",
            "type": "script",
            "author": "cm8ahpcp3la1d2oY",
            "img": "icons/svg/dice-target.svg",
            "scope": "global",
            "command": "// based on @ccjmk and @crymic macro for sleep.\n// uses convinient effects\n// Midi-qol \"On Use\"\n\nasync function wait (ms) {\n\treturn new Promise((resolve) => {\n\t\tsetTimeout(resolve, ms);\n\t});\n}\n\nconst blindHp = await args[0].damageTotal;\nconst immuneConditions = [game.i18n.localize(\"Blinded\"), game.i18n.localize(\"Unconscious\")];\nconsole.log(`Color Spray Spell => Available HP Pool [${blindHp}] points`);\nconst targets = await args[0].targets\n\t.filter((i) => i.actor.system.attributes.hp.value !== 0 && !i.actor.effects.find((x) => immuneConditions.includes((x.name ?? x.label))))\n\t.sort((a, b) => (canvas.tokens.get(a.id).actor.system.attributes.hp.value < canvas.tokens.get(b.id).actor.system.attributes.hp.value ? -1 : 1));\nlet remainingBlindHp = blindHp;\nlet blindTarget = [];\n\nfor (let target of targets) {\n\tconst findTarget = await canvas.tokens.get(target.id);\n\tconst targetHpValue = findTarget.actor.system.attributes.hp.value;\n\tconst targetImg = target?.texture?.src;\n\n\tif (remainingBlindHp >= targetHpValue) {\n\t\tremainingBlindHp -= targetHpValue;\n\t\tconsole.log(`Color Spray Results => Target: ${findTarget.name} |\tHP: ${targetHpValue} | HP Pool: ${remainingBlindHp} | Status: Blinded`);\n\t\tblindTarget.push(`<div class=\"midi-qol-flex-container\"><div>Blinded</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n\t\tconst gameRound = game.combat ? game.combat.round : 0;\n\t\tconst effectData = {\n\t\t\tlabel: \"Color Spray: Blinded\",\n\t\t\tname: \"Color Spray: Blinded\",\n\t\t\ticon: args[0].itemData.img,\n\t\t\torigin: args[0].uuid,\n\t\t\tdisabled: false,\n\t\t\tduration: {startRound: gameRound, startTime: game.time.worldTime},\n\t\t\tflags: {dae: {specialDuration: [\"turnEndSource\"]}},\n\t\t\tchanges: [\n\t\t\t\t{key: \"macro.CE\", mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM, value: game.i18n.localize(\"Blinded\"), priority: 20},\n\t\t\t],\n\t\t};\n\n\t\tawait MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: findTarget.actor.uuid, effects: [effectData]});\n\t} else {\n\t\tconsole.log(`Color Spray Results => Target: ${target.name} | HP: ${targetHpValue} | HP Pool: ${remainingBlindHp - targetHpValue} | Status: Not enough HP remaining`);\n\t\tblindTarget.push(`<div class=\"midi-qol-flex-container\"><div>misses</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n\t}\n}\nawait wait(500);\nconst blindResults = `<div><div class=\"midi-qol-nobox\">${blindTarget.join(\"\")}</div></div>`;\nconst chatMessage = game.messages.get(args[0].itemCardId);\nlet content = duplicate(chatMessage.content);\nconst searchString = /<div class=\"midi-qol-hits-display\">[\\s\\S]*<div class=\"end-midi-qol-hits-display\">/g;\nconst replaceString = `<div class=\"midi-qol-hits-display\"><div class=\"end-midi-qol-hits-display\">${blindResults}`;\ncontent = await content.replace(searchString, replaceString);\nawait chatMessage.update({content: content});",
            "folder": null,
            "sort": 0,
            "ownership": {
              "default": 0
            },
            "flags": {}
          }
        }
      },
      "effects": [],
      "_id": "TO3jXY7Nj2mpIW38",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611571,
        "modifiedTime": 1722772611571,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.TO3jXY7Nj2mpIW38"
    },
    {
      "name": "Eldritch Blast",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "237",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>A beam of crackling energy streaks toward a creature within range. Make a ranged spell attack against the target. On a hit, the target takes [[/damage 1d10 type=force]] damage.</p><div class=\"rd__spc-inline-post\"></div><p>The spell creates more than one beam when you reach higher levels: two beams at 5th level, three beams at 11th level, and four beams at 17th level. You can direct the beams at the same target or at different ones. Make a separate attack roll for each beam.</p></div>",
          "chat": ""
        },
        "actionType": "rsak",
        "level": 0,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 1,
          "units": "",
          "type": "creature",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 120,
          "units": "ft",
          "long": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "damage": {
          "parts": [
            [
              "1d10[force]",
              "force"
            ]
          ],
          "versatile": ""
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "save": {
          "dc": null,
          "scaling": "spell",
          "ability": ""
        },
        "ability": "",
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "always",
          "prepared": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/light/beam-explosion-pink-purple.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "eldritch%20blast_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": false,
          "magiceffect": false,
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "autoFailFriendly": false,
          "autoSaveFriendly": false,
          "rollOther": false,
          "critOther": false,
          "offHandWeapon": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false
        },
        "autoanimations": {
          "id": "241e5034-9d31-4b9a-bfee-cb6d4c3a2182",
          "label": "Eldritch Blast",
          "levels3d": {
            "type": "explosion",
            "data": {
              "color01": "#FFFFFF",
              "color02": "#FFFFFF",
              "spritePath": "modules/levels-3d-preview/assets/particles/dust.png"
            },
            "sound": {
              "enable": false
            },
            "secondary": {
              "enable": false,
              "data": {
                "color01": "#FFFFFF",
                "color02": "#FFFFFF",
                "spritePath": "modules/levels-3d-preview/assets/particles/dust.png"
              }
            }
          },
          "macro": {
            "enable": false
          },
          "meleeSwitch": {
            "video": {
              "dbSection": "range",
              "menuType": "weapon",
              "animation": "arrow",
              "variant": "regular",
              "color": "regular"
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "detect": "automatic",
              "range": 2,
              "returning": false,
              "switchType": "on"
            }
          },
          "menu": "melee",
          "primary": {
            "video": {
              "dbSection": "melee",
              "menuType": "weapon",
              "animation": "club",
              "variant": "01",
              "color": "white",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "isWait": false,
              "opacity": 1,
              "playbackRate": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "secondary": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1.5,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "soundOnly": {
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            }
          },
          "source": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "isWait": true,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "target": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "opacity": 1,
              "persistent": false,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "isEnabled": false,
          "isCustomized": false,
          "fromAmmo": false,
          "version": 5
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "midi-qol": {
          "fumbleThreshold": null,
          "effectActivation": false,
          "onUseMacroName": "[postActiveEffects]function.chrisPremades.macros.eldritchBlast.item,[postDamageRoll]function.chrisPremades.macros.eldritchBlast.damage",
          "onUseMacroParts": {
            "items": {
              "0": {
                "macroName": "function.chrisPremades.macros.eldritchBlast.item",
                "option": "postActiveEffects"
              },
              "1": {
                "macroName": "function.chrisPremades.macros.eldritchBlast.damage",
                "option": "postDamageRoll"
              }
            }
          }
        },
        "chris-premades": {
          "info": {
            "name": "Eldritch Blast",
            "version": "0.7.45",
            "hasAnimation": true,
            "source": "CPR"
          }
        },
        "dnd5e": {}
      },
      "effects": [],
      "_id": "tr1VewDN5kxavGTS",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611611,
        "modifiedTime": 1722772611611,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.tr1VewDN5kxavGTS"
    },
    {
      "name": "Minor Illusion",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "260",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>You create a sound or an image of an object within range that lasts for the duration. The illusion also ends if you dismiss it as an action or cast this spell again.</p><div class=\"rd__spc-inline-post\"></div><p>If you create a sound, its volume can range from a whisper to a scream. It can be your voice, someone else's voice, a lion's roar, a beating of drums, or any other sound you choose. The sound continues unabated throughout the duration, or you can make discrete sounds at different times before the spell ends.</p><p>If you create an image of an object—such as a chair, muddy footprints, or a small chest—it must be no larger than a 5-foot cube. The image can't create sound, light, smell, or any other sensory effect. Physical interaction with the image reveals it to be an illusion, because things can pass through it.</p><p>If a creature uses its action to examine the sound or image, the creature can determine that it is an illusion with a successful Intelligence (&amp;Reference[skill=Investigation]) check against your spell save DC. If a creature discerns the illusion for what it is, the illusion becomes faint to the creature.</p></div>",
          "chat": ""
        },
        "actionType": "util",
        "level": 0,
        "school": "ill",
        "properties": [
          "somatic",
          "material"
        ],
        "materials": {
          "value": "a bit of fleece",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 5,
          "units": "ft",
          "type": "cube",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 30,
          "units": "ft",
          "long": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "save": {
          "dc": null,
          "scaling": "cha",
          "ability": ""
        },
        "ability": "cha",
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "always",
          "prepared": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/perception/eye-winged-pink.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "minor%20illusion_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "_id": "29PTXBN9gFEAgjPg",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611651,
        "modifiedTime": 1722772611651,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.29PTXBN9gFEAgjPg"
    },
    {
      "_id": "jwWjKqnYLUGW6Hxp",
      "name": "Innate Spellcasting (Psionics)",
      "type": "feat",
      "system": {
        "source": {
          "custom": "",
          "book": "ToB2",
          "page": "187",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">Innate Spellcasting (Psionics).</span></span> <p>The grimmlet swarm's innate spellcasting ability is Charisma (spell save DC <span class=\"rd__dc\">17</span>, [[/r 1d20+9]]{+9} to hit with spell attacks). It can innately cast the following spells, requiring no components:</p><div class=\"rd__spc-inline-post\"></div><ul class=\"rd__list rd__list-hang-notitle\"><li class=\"rd__li  rd__li-spell\"><p>At will: @UUID[Actor.zEjdUOfvRaG2zWDw.Item.TO3jXY7Nj2mpIW38]<span class=\"rd__color\" style=\"color:#777\">*</span>, @UUID[Actor.zEjdUOfvRaG2zWDw.Item.tr1VewDN5kxavGTS] (3 beams)<span class=\"rd__color\" style=\"color:#777\">*</span>, @UUID[Actor.zEjdUOfvRaG2zWDw.Item.29PTXBN9gFEAgjPg]</p></li><li class=\"rd__li  rd__li-spell\"><p>3/day each: @UUID[Actor.zEjdUOfvRaG2zWDw.Item.JW3Ao9UnEVwOnVJo], @UUID[Actor.zEjdUOfvRaG2zWDw.Item.M2qJXMqZ0Wuf5cX9]<span class=\"rd__color\" style=\"color:#777\">*</span>, @UUID[Actor.zEjdUOfvRaG2zWDw.Item.bsj9Kx3VfvcWCggF]</p></li><li class=\"rd__li  rd__li-spell\"><p>1/day: @UUID[Actor.zEjdUOfvRaG2zWDw.Item.IyXSGj89SDAM8ltB]</p></li></ul></div><div class=\"rd__spc-inline-post\"></div><div class=\"rd__b  rd__b--3\"><p><span class=\"rd__color\" style=\"color:#777\">*if using <i>Deep Magic for 5th Edition</i>, replace the indicated spells with <i>maddening whispers</i>, <i>crushing curse</i>, and <i>void strike</i>, respectively</span></p><div class=\"rd__spc-inline-post\"></div></div></div>",
          "chat": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "range": {
          "units": "",
          "value": null,
          "long": null
        },
        "save": {
          "scaling": "flat",
          "ability": "",
          "dc": null
        },
        "activation": {
          "type": "",
          "cost": null,
          "condition": ""
        },
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "recharge": {
          "charged": false,
          "value": null
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "cover": null,
        "crewed": false,
        "ability": null,
        "actionType": null,
        "formula": "",
        "summons": null,
        "properties": [],
        "requirements": ""
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "icons/magic/unholy/orb-smoking-green.webp",
      "flags": {
        "plutonium": {
          "page": "monsterSpellcasting",
          "source": "ToB2",
          "hash": "innate%20spellcasting%20(psionics)_grimmlet%20swarm_tob2_tob2"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722772611680,
        "modifiedTime": 1722772611680,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!zEjdUOfvRaG2zWDw.jwWjKqnYLUGW6Hxp"
    }
  ],
  "effects": [],
  "folder": "Jqii0UkmSN6Ysk86",
  "sort": 0,
  "ownership": {
    "default": 0,
    "cm8ahpcp3la1d2oY": 3
  },
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "3.1.2",
    "coreVersion": "11.315",
    "createdTime": 1722772610945,
    "modifiedTime": 1722774733060,
    "lastModifiedBy": "cm8ahpcp3la1d2oY"
  },
  "_key": "!actors!zEjdUOfvRaG2zWDw"
}
