{
  "name": "Oni",
  "type": "npc",
  "flags": {
    "plutonium": {
      "page": "bestiary.html",
      "source": "MM",
      "hash": "oni_mm"
    },
    "monks-little-details": {
      "sound-effect": "https://5etools-mirror-2.github.io/audio/bestiary/oni.mp3"
    }
  },
  "_id": "mIc1vLNUUDRxB0tN",
  "img": "https://raw.githubusercontent.com/5etools-mirror-2/5etools-img/main/bestiary/MM/Oni.webp",
  "system": {
    "currency": {
      "pp": 0,
      "gp": 0,
      "ep": 0,
      "sp": 0,
      "cp": 0
    },
    "abilities": {
      "str": {
        "value": 19,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      },
      "dex": {
        "value": 11,
        "proficient": 1,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      },
      "con": {
        "value": 16,
        "proficient": 1,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      },
      "int": {
        "value": 14,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      },
      "wis": {
        "value": 12,
        "proficient": 1,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      },
      "cha": {
        "value": 15,
        "proficient": 1,
        "max": null,
        "bonuses": {
          "check": "",
          "save": "0"
        }
      }
    },
    "bonuses": {
      "mwak": {
        "attack": "",
        "damage": ""
      },
      "rwak": {
        "attack": "",
        "damage": ""
      },
      "msak": {
        "attack": "",
        "damage": ""
      },
      "rsak": {
        "attack": "",
        "damage": ""
      },
      "abilities": {
        "check": "",
        "save": "",
        "skill": ""
      },
      "spell": {
        "dc": ""
      }
    },
    "skills": {
      "acr": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "ani": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "arc": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "ath": {
        "ability": "str",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "dec": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 2,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "his": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "ins": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "itm": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "inv": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "med": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "nat": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "prc": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "prf": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "per": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "rel": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "slt": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "ste": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      },
      "sur": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "0",
          "passive": ""
        }
      }
    },
    "tools": {},
    "spells": {
      "spell1": {
        "value": 0,
        "override": null
      },
      "spell2": {
        "value": 0,
        "override": null
      },
      "spell3": {
        "value": 0,
        "override": null
      },
      "spell4": {
        "value": 0,
        "override": null
      },
      "spell5": {
        "value": 0,
        "override": null
      },
      "spell6": {
        "value": 0,
        "override": null
      },
      "spell7": {
        "value": 0,
        "override": null
      },
      "spell8": {
        "value": 0,
        "override": null
      },
      "spell9": {
        "value": 0,
        "override": null
      },
      "pact": {
        "value": 0,
        "override": null
      },
      "spell0": {
        "value": 0,
        "override": null
      }
    },
    "attributes": {
      "init": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonus": "0"
      },
      "movement": {
        "burrow": null,
        "climb": null,
        "fly": 30,
        "swim": null,
        "walk": 30,
        "units": "ft",
        "hover": false
      },
      "attunement": {
        "max": 3
      },
      "senses": {
        "darkvision": 60,
        "blindsight": 0,
        "tremorsense": 0,
        "truesight": 0,
        "units": "ft",
        "special": ""
      },
      "spellcasting": "cha",
      "exhaustion": 0,
      "concentration": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonuses": {
          "save": ""
        },
        "limit": 1
      },
      "ac": {
        "flat": null,
        "calc": "default"
      },
      "hp": {
        "value": 110,
        "max": 110,
        "temp": 0,
        "tempmax": 0,
        "formula": "13d10 + 39"
      },
      "death": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "success": 0,
        "failure": 0
      }
    },
    "details": {
      "biography": {
        "value": "<div class=\"rd__b  rd__b--1\"><div class=\"float-clear\"></div><div><div class=\"rd__wrp-image relative\">\n\t\t\t<a href=\"https://raw.githubusercontent.com/5etools-mirror-2/5etools-img/main/bestiary/MM/Oni.webp\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t<img class=\"rd__image\" src=\"https://raw.githubusercontent.com/5etools-mirror-2/5etools-img/main/bestiary/MM/Oni.webp\" />\n\t\t\t</a>\n\t\t</div></div></div><div class=\"rd__b  rd__b--1\"><div class=\"rd__b  rd__b--2\"><p>In nursery rhymes, oni are fearsome bogeymen that haunt the nightmares of children and adults alike, yet they are very real and always hungry. They find human babies especially delicious. Oni look like demonic ogres with blue or green skin, dark hair, and a pair of short ivory horns protruding from their foreheads. Their eyes are dark with strikingly white pupils, and their teeth and claws are jet black.</p><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">Night Haunters.</span></span> <p>By the light of day, an oni hides its true form with magic, gaining the trust of those it intends to betray when darkness descends. These creatures can change their size as well as their shape, appearing as humanoids as they pass through towns, pretending to be travelers, woodcutters, or frontier folk. In such a form, an oni takes stock of the selection of humanoids in a settlement and devises ways to abduct and devour some of them.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"2\"> <span class=\"entry-title-inner\">Magical Ogres.</span></span> <p>Oni are sometimes called ogre mages because of their innate magical ability. Though they are only distantly related to true ogres, they share the ogres' habit of joining forces with other evil creatures. An oni serves a master if doing so proves lucrative or provides it with a luxurious, well-defended home. Oni covet magic, and they work for evil wizards and hags in exchange for useful magic items.</p><div class=\"rd__spc-inline-post\"></div></div></div><div class=\"rd__b-special rd__b-inset rd__b-inset--readaloud \"><span class=\"rd__h rd__h--2-inset rd__h--2-inset-no-name\"><span class=\"ve-flex-vh-center\"><span class=\"rd__h-toggle ml-2 clickable no-select no-print lst-is-exporting-image__hidden\" data-rd-h-special-toggle-button=\"true\" title=\"Toggle Visibility (CTRL to Toggle All)\">[–]</span></span></span><div class=\"rd__quote\"><p class=\"rd__quote-line \">“<i>Lock the door, blow out the light;</i></p><p class=\"rd__quote-line \"><i>The hungry oni haunts the night.</i></p><p class=\"rd__quote-line \"><i>Hide and tremble, little one;</i></p><p class=\"rd__quote-line \"><i>The oni wants to have some fun.</i></p><p class=\"rd__quote-line \"><i>Hear it scratching on the door;</i></p><p class=\"rd__quote-line \"><i>See its shadow cross the floor.</i></p><p class=\"rd__quote-line \"><i>The sun won't rise for quite a while;</i></p><p class=\"rd__quote-line rd__quote-line--last\"><i>Till then, beware the oni's smile.</i>”</p><p><span class=\"rd__quote-by\">— Children's rhyme</span></p></div><div class=\"float-clear\"></div></div></div>",
        "public": ""
      },
      "alignment": "lawful evil",
      "race": null,
      "type": {
        "value": "giant",
        "subtype": ""
      },
      "environment": "Forest, Urban",
      "cr": 7,
      "spellLevel": 0,
      "source": {
        "book": "MM",
        "page": "239",
        "custom": "",
        "license": ""
      }
    },
    "resources": {
      "legact": {
        "value": 0,
        "max": 0
      },
      "legres": {
        "value": 0,
        "max": 0
      },
      "lair": {
        "value": false,
        "initiative": 20
      }
    },
    "traits": {
      "size": "lg",
      "di": {
        "bypasses": [],
        "value": [],
        "custom": ""
      },
      "dr": {
        "bypasses": [],
        "value": [],
        "custom": ""
      },
      "dv": {
        "bypasses": [],
        "value": [],
        "custom": ""
      },
      "dm": {
        "amount": {},
        "bypasses": []
      },
      "ci": {
        "value": [],
        "custom": ""
      },
      "languages": {
        "value": [
          "common",
          "giant"
        ],
        "custom": ""
      }
    }
  },
  "prototypeToken": {
    "name": "Oni",
    "displayName": 20,
    "actorLink": false,
    "appendNumber": false,
    "prependAdjective": false,
    "texture": {
      "src": "systems/dnd5e/tokens/giant/Oni.webp",
      "scaleX": 2,
      "scaleY": 2,
      "offsetX": 0,
      "offsetY": 0,
      "rotation": 0
    },
    "width": 2,
    "height": 2,
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 20,
    "bar1": {
      "attribute": "attributes.hp"
    },
    "bar2": {
      "attribute": "skills.prc.passive"
    },
    "light": {
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      }
    },
    "sight": {
      "enabled": true,
      "range": 60,
      "angle": 360,
      "visionMode": "darkvision",
      "color": null,
      "attenuation": 0.1,
      "brightness": 0,
      "saturation": -1,
      "contrast": 0
    },
    "detectionModes": [],
    "flags": {},
    "randomImg": false
  },
  "items": [
    {
      "_id": "7cSeLRrRX9hBCWAn",
      "name": "Multiattack",
      "type": "feat",
      "system": {
        "source": {
          "custom": "",
          "book": "MM",
          "page": "239",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>The oni makes two attacks, either with its claws or its glaive.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "save": {
          "scaling": "flat",
          "ability": "",
          "dc": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "target": {
          "prompt": true,
          "value": null,
          "width": null,
          "units": "",
          "type": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "recharge": {
          "charged": false,
          "value": null
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "cover": null,
        "crewed": false,
        "ability": null,
        "summons": null,
        "requirements": ""
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "icons/skills/melee/strike-weapons-orange.webp",
      "flags": {
        "plutonium": {
          "page": "monsterAction",
          "source": "MM",
          "hash": "multiattack_oni_mm_mm"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361332,
        "modifiedTime": 1722770361332,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.7cSeLRrRX9hBCWAn"
    },
    {
      "system": {
        "type": {
          "value": "natural",
          "baseItem": ""
        },
        "damage": {
          "parts": [
            [
              "1d8  + @mod",
              "slashing"
            ]
          ],
          "versatile": ""
        },
        "properties": [
          "mgc"
        ],
        "source": {
          "custom": "",
          "book": "MM",
          "page": "239",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p><i>Melee Weapon Attack:</i> [[/r 1d20+7]]{+7} to hit, reach 5 ft., one target. <i>Hit:</i> 8 ([[/damage 1d8 + 4 type=slashing]]) damage.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "range": {
          "value": 5,
          "long": null,
          "units": "ft"
        },
        "proficient": 1,
        "save": {
          "scaling": "flat",
          "ability": "",
          "dc": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "target": {
          "value": 1,
          "type": "creature",
          "prompt": true,
          "width": null,
          "units": ""
        },
        "ability": "str",
        "actionType": "mwak",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "identified": true,
        "unidentified": {
          "description": ""
        },
        "container": null,
        "quantity": 1,
        "weight": 0,
        "price": {
          "value": 0,
          "denomination": "gp"
        },
        "rarity": "",
        "attunement": 0,
        "equipped": true,
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "summons": null,
        "armor": {
          "value": null
        },
        "hp": {
          "value": null,
          "max": null,
          "dt": null,
          "conditions": ""
        },
        "magicalBonus": null
      },
      "_id": "pd5Ys85lcdJtWTh8",
      "name": "Claw (Oni Form Only)",
      "type": "weapon",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "icons/skills/melee/strike-slashes-red.webp",
      "flags": {
        "plutonium": {
          "page": "monsterAction",
          "source": "MM",
          "hash": "claw%20(oni%20form%20only)_oni_mm_mm"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361380,
        "modifiedTime": 1722770361380,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.pd5Ys85lcdJtWTh8"
    },
    {
      "system": {
        "type": {
          "value": "martialM",
          "baseItem": "glaive"
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p><i>Melee Weapon Attack:</i> [[/r 1d20+7]]{+7} to hit, reach 10 ft., one target. <i>Hit:</i> 15 ([[/damage 2d10 + 4 type=slashing]]) damage, or 9 ([[/damage 1d10 + 4 type=slashing]]) damage in Small or Medium form.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "source": {
          "custom": "",
          "book": "MM",
          "page": "239",
          "license": ""
        },
        "quantity": 1,
        "weight": 6,
        "price": {
          "value": 20,
          "denomination": "gp"
        },
        "attunement": 0,
        "equipped": true,
        "rarity": "",
        "identified": true,
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "target": {
          "value": 1,
          "units": "",
          "type": "creature",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 10,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "str",
        "actionType": "mwak",
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "2d10  + @mod",
              "slashing"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "flat"
        },
        "armor": {
          "value": null
        },
        "hp": {
          "value": 0,
          "max": 0,
          "dt": null,
          "conditions": ""
        },
        "properties": [
          "hvy",
          "rch",
          "two",
          "mgc"
        ],
        "proficient": 1,
        "unidentified": {
          "description": ""
        },
        "container": null,
        "crewed": false,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "summons": {
          "match": {
            "attacks": false,
            "proficiency": false,
            "saves": false
          },
          "profiles": [],
          "bonuses": {},
          "prompt": true
        },
        "magicalBonus": null
      },
      "_id": "ZjZbEE65kuUUKYHg",
      "name": "Glaive",
      "type": "weapon",
      "img": "icons/weapons/polearms/glaive-simple.webp",
      "flags": {
        "plutonium": {
          "page": "monsterAction",
          "source": "MM",
          "hash": "glaive_oni_mm_mm"
        }
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361440,
        "modifiedTime": 1722770361440,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.ZjZbEE65kuUUKYHg"
    },
    {
      "_id": "3kWmdm0zxs4Wspwl",
      "name": "Change Shape",
      "type": "feat",
      "system": {
        "source": {
          "custom": "",
          "book": "MM",
          "page": "239",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>The oni magically polymorphs into a Small or Medium humanoid, into a Large giant, or back into its true form. Other than its size, its statistics are the same in each form. The only equipment that is transformed is its glaive, which shrinks so that it can be wielded in humanoid form. If the oni dies, it reverts to its true form, and its glaive reverts to its normal size.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "save": {
          "scaling": "flat",
          "ability": "",
          "dc": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "target": {
          "prompt": true,
          "value": null,
          "width": null,
          "units": "",
          "type": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "recharge": {
          "charged": false,
          "value": null
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "cover": null,
        "crewed": false,
        "ability": null,
        "summons": null,
        "requirements": ""
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "icons/creatures/magical/humanoid-giant-forest-blue.webp",
      "flags": {
        "plutonium": {
          "page": "monsterAction",
          "source": "MM",
          "hash": "change%20shape_oni_mm_mm"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361519,
        "modifiedTime": 1722770361519,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.3kWmdm0zxs4Wspwl"
    },
    {
      "_id": "YepixQ5AfKBUAzUx",
      "name": "Magic Weapons",
      "type": "feat",
      "system": {
        "source": {
          "custom": "",
          "book": "MM",
          "page": "239",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>The oni's weapon attacks are magical.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "range": {
          "units": "",
          "value": null,
          "long": null
        },
        "save": {
          "scaling": "flat",
          "ability": "",
          "dc": null
        },
        "activation": {
          "type": "",
          "cost": null,
          "condition": ""
        },
        "target": {
          "prompt": true,
          "value": null,
          "width": null,
          "units": "",
          "type": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "recharge": {
          "charged": false,
          "value": null
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "cover": null,
        "crewed": false,
        "ability": null,
        "summons": null,
        "requirements": ""
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "icons/skills/melee/weapons-crossed-swords-teal.webp",
      "flags": {
        "plutonium": {
          "page": "monsterTrait",
          "source": "MM",
          "hash": "magic%20weapons_oni_mm_mm"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361563,
        "modifiedTime": 1722770361563,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.YepixQ5AfKBUAzUx"
    },
    {
      "_id": "64cROFWRq9yjifse",
      "name": "Regeneration",
      "type": "feat",
      "system": {
        "source": {
          "custom": "",
          "book": "MM",
          "page": "239",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>The oni regains 10 hit points at the start of its turn if it has at least 1 hit point.</p><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "range": {
          "units": "",
          "value": null,
          "long": null
        },
        "save": {
          "scaling": "flat",
          "ability": "",
          "dc": null
        },
        "activation": {
          "type": "",
          "cost": null,
          "condition": ""
        },
        "target": {
          "prompt": true,
          "value": null,
          "width": null,
          "units": "",
          "type": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "recharge": {
          "charged": false,
          "value": null
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "cover": null,
        "crewed": false,
        "ability": null,
        "summons": null,
        "requirements": ""
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "icons/magic/life/heart-cross-strong-purple-orange.webp",
      "flags": {
        "plutonium": {
          "page": "monsterTrait",
          "source": "MM",
          "hash": "regeneration_oni_mm_mm"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361606,
        "modifiedTime": 1722770361606,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.64cROFWRq9yjifse"
    },
    {
      "_id": "fv87SsAL9ocqyu54",
      "name": "Chain Mail",
      "type": "equipment",
      "system": {
        "description": {
          "value": "<div class=\"rd__b  rd__b--2\"><p>Made of interlocking metal rings, chain mail includes a layer of quilted fabric worn underneath the mail to prevent chafing and to cushion the impact of blows. The suit includes gauntlets.</p></div>",
          "chat": ""
        },
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "145",
          "license": ""
        },
        "quantity": 1,
        "weight": 55,
        "price": {
          "value": 75,
          "denomination": "gp"
        },
        "attunement": 0,
        "equipped": true,
        "rarity": "",
        "identified": true,
        "activation": {
          "type": "",
          "cost": null,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "target": {
          "value": 1,
          "units": "",
          "type": "creature",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 0,
          "long": 0,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": "",
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "armor": {
          "value": 16,
          "dex": 0,
          "magicalBonus": null
        },
        "hp": {
          "value": 0,
          "max": 0,
          "dt": null,
          "conditions": ""
        },
        "speed": {
          "value": null,
          "conditions": ""
        },
        "strength": 13,
        "proficient": 1,
        "type": {
          "value": "heavy",
          "baseItem": "chainmail"
        },
        "unidentified": {
          "description": ""
        },
        "container": null,
        "crewed": false,
        "properties": [
          "stealthDisadvantage"
        ],
        "attack": {
          "bonus": "",
          "flat": false
        },
        "summons": {
          "match": {
            "attacks": false,
            "proficiency": false,
            "saves": false
          },
          "profiles": [],
          "bonuses": {},
          "prompt": true
        }
      },
      "img": "icons/commodities/metal/mail-chain-steel.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "items.html",
          "source": "PHB",
          "hash": "chain%20mail_phb"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361660,
        "modifiedTime": 1722770361660,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.fv87SsAL9ocqyu54"
    },
    {
      "name": "Charm Person",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "221",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>You attempt to charm a humanoid you can see within range. It must make a Wisdom saving throw, and does so with advantage if you or your companions are fighting it. If it fails the saving throw, it is &amp;Reference[condition=charmed] by you until the spell ends or until you or your companions do anything harmful to it. The &amp;Reference[condition=charmed] creature regards you as a friendly acquaintance. When the spell ends, the creature knows it was &amp;Reference[condition=charmed] by you.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, you can target one additional creature for each slot level above 1st. The creatures must be within 30 feet of each other when you target them.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "actionType": "save",
        "level": 1,
        "school": "enc",
        "properties": [],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 1,
          "units": "",
          "type": "creature",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 30,
          "units": "ft",
          "long": 0
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "scaling": {
          "mode": "level",
          "formula": ""
        },
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "ability": "",
        "uses": {
          "value": 0,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "prepared",
          "prepared": false
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/life/heart-shadow-red.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "charm%20person_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        },
        "dynamiceffects": {
          "effects": [
            {
              "modSpecKey": "flags.dnd5e.conditions",
              "value": "Charmed",
              "mode": "+",
              "targetSpecific": false,
              "id": 1,
              "itemId": "uPKtziB4BMD9uNh9",
              "active": true,
              "_targets": []
            }
          ],
          "equipActive": true,
          "alwaysActive": false
        },
        "dae": {
          "activeEquipped": false,
          "alwaysActive": false
        },
        "midi-qol": {
          "onUseMacroName": "",
          "effectActivation": false
        },
        "dnd5e": {
          "migratedProperties": [
            "vocal",
            "somatic"
          ]
        }
      },
      "effects": [
        {
          "name": "Charm Person",
          "icon": "icons/magic/life/heart-shadow-red.webp",
          "changes": [
            {
              "key": "StatusEffect",
              "mode": 0,
              "value": "Charmed",
              "priority": 20
            }
          ],
          "disabled": false,
          "duration": {
            "startTime": null,
            "seconds": null,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "origin": null,
          "transfer": false,
          "flags": {
            "dae": {
              "selfTarget": null,
              "selfTargetAlways": null
            },
            "plutonium": {
              "dedupeId": "charm-person"
            }
          },
          "_id": "jMvaC6LI9b9QUxya",
          "tint": null,
          "description": "",
          "statuses": [],
          "_key": "!actors.items.effects!mIc1vLNUUDRxB0tN.3nhKXxdhOLvQI5QW.jMvaC6LI9b9QUxya"
        }
      ],
      "_id": "3nhKXxdhOLvQI5QW",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361717,
        "modifiedTime": 1722770361717,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.3nhKXxdhOLvQI5QW"
    },
    {
      "name": "Cone of Cold",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "224",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>A blast of cold air erupts from your hands. Each creature in a 60-foot cone must make a Constitution saving throw. A creature takes [[/damage 8d8 type=cold]] damage on a failed save, or half as much damage on a successful one.</p><div class=\"rd__spc-inline-post\"></div><p>A creature killed by this spell becomes a frozen statue until it thaws.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 6th level or higher, the damage increases by [[/damage 1d8]] for each slot level above 5th.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "actionType": "save",
        "level": 5,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic",
          "material"
        ],
        "materials": {
          "value": "a small crystal or glass cone",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 60,
          "units": "ft",
          "type": "cone",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 0,
          "units": "",
          "long": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "damage": {
          "parts": [
            [
              "8d8",
              "cold"
            ]
          ],
          "versatile": ""
        },
        "scaling": {
          "mode": "level",
          "formula": "1d8"
        },
        "save": {
          "ability": "con",
          "dc": null,
          "scaling": "cha"
        },
        "ability": "cha",
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/air/wind-weather-snow-gusts.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "cone%20of%20cold_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "_id": "PwkFjh1B3mtzaBqZ",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361789,
        "modifiedTime": 1722770361789,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.PwkFjh1B3mtzaBqZ"
    },
    {
      "name": "Gaseous Form",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "244",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>You transform a willing creature you touch, along with everything it's wearing and carrying, into a misty cloud for the duration. The spell ends if the creature drops to 0 hit points. An incorporeal creature isn't affected.</p><div class=\"rd__spc-inline-post\"></div><p>While in this form, the target's only method of movement is a flying speed of 10 feet. The target can enter and occupy the space of another creature. The target has resistance to nonmagical damage, and it has advantage on Strength, Dexterity, and Constitution saving throws. The target can pass through small holes, narrow openings, and even mere cracks, though it treats liquids as though they were solid surfaces. The target can't fall and remains hovering in the air even when &amp;Reference[condition=stunned] or otherwise &amp;Reference[condition=incapacitated].</p><p>While in the form of a misty cloud, the target can't talk or manipulate objects, and any objects it was carrying or holding can't be dropped, used, or otherwise interacted with. The target can't attack or cast spells.</p></div>",
          "chat": ""
        },
        "actionType": "util",
        "level": 3,
        "school": "trs",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "a bit of gauze and a wisp of smoke",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 1,
          "units": "touch",
          "type": "creature",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 0,
          "units": "touch",
          "long": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "save": {
          "dc": null,
          "scaling": "cha",
          "ability": ""
        },
        "ability": "cha",
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/lightning/projectile-orb-blue.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "gaseous%20form_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "_id": "eE1PTA0djoVgwYjj",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361852,
        "modifiedTime": 1722770361852,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.eE1PTA0djoVgwYjj"
    },
    {
      "name": "Sleep",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "276",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>This spell sends creatures into a magical slumber. Roll [[/r 5d8]]; the total is how many hit points of creatures this spell can affect. Creatures within 20 feet of a point you choose within range are affected in ascending order of their current hit points (ignoring &amp;Reference[condition=unconscious] creatures).</p><div class=\"rd__spc-inline-post\"></div><p>Starting with the creature that has the lowest current hit points, each creature affected by this spell falls &amp;Reference[condition=unconscious] until the spell ends, the sleeper takes damage, or someone uses an action to shake or slap the sleeper awake. Subtract each creature's hit points from the total before moving on to the creature with the next lowest hit points. A creature's hit points must be equal to or less than the remaining total for that creature to be affected.</p><p>Undead and creatures immune to being &amp;Reference[condition=charmed] aren't affected by this spell.</p></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 2nd level or higher, roll an additional [[/r 2d8]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "actionType": "util",
        "level": 1,
        "school": "enc",
        "properties": [
          "vocal",
          "somatic",
          "material"
        ],
        "materials": {
          "value": "a pinch of fine sand, rose petals, or a cricket",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 20,
          "units": "ft",
          "type": "sphere",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 90,
          "units": "ft",
          "long": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "damage": {
          "parts": [
            [
              "5d8",
              "midi-none"
            ]
          ],
          "versatile": ""
        },
        "scaling": {
          "mode": "level",
          "formula": "2d8"
        },
        "save": {
          "dc": null,
          "scaling": "cha",
          "ability": ""
        },
        "ability": "cha",
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/control/sleep-bubble-purple.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "sleep_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        },
        "midi-qol": {
          "onUseMacroName": "[postActiveEffects]ItemMacro",
          "forceCEOff": true
        },
        "itemacro": {
          "macro": {
            "_id": null,
            "name": "-",
            "type": "script",
            "author": "cm8ahpcp3la1d2oY",
            "img": "icons/svg/dice-target.svg",
            "scope": "global",
            "command": "// based on @ccjmk and @crymic macro for sleep. Gets targets and ignores those who are immune to sleep.\n// uses convinient effects\n// Midi-qol \"On Use\"\n\nasync function wait (ms) {\n\treturn new Promise((resolve) => {\n\t\tsetTimeout(resolve, ms);\n\t});\n}\n\nconst sleepHp = await args[0].damageTotal;\nconst condition = \"Unconscious\";\nconsole.log(`Sleep Spell => Available HP Pool [${sleepHp}] points`);\nconst targets = await args[0].targets\n\t.filter((i) => i.actor.system.attributes.hp.value !== 0 && !i.actor.effects.find((x) => (x.name ?? x.label) === condition))\n\t.sort((a, b) => (canvas.tokens.get(a.id).actor.system.attributes.hp.value < canvas.tokens.get(b.id).actor.system.attributes.hp.value ? -1 : 1));\nlet remainingSleepHp = sleepHp;\nlet sleepTarget = [];\n\nfor (let target of targets) {\n\tconst findTarget = await canvas.tokens.get(target.id);\n\tconst immuneType = findTarget.actor.type === \"character\"\n\t\t? [\"undead\", \"construct\"].some((race) => (findTarget.actor.system.details.race || \"\").toLowerCase().includes(race))\n\t\t: [\"undead\", \"construct\"].some((value) => (findTarget.actor.system.details.type.value || \"\").toLowerCase().includes(value));\n\tconst immuneCI = findTarget.actor.system.traits.ci.custom.includes(\"Sleep\");\n\tconst sleeping = findTarget.actor.effects.find((i) => (i.name ?? i.label) === condition);\n\tconst targetHpValue = findTarget.actor.system.attributes.hp.value;\n\tconst targetImg = target?.texture?.src;\n\tif ((immuneType) || (immuneCI) || (sleeping)) {\n\t\tconsole.log(`Sleep Results => Target: ${findTarget.name} | HP: ${targetHpValue} | Status: Resists`);\n\t\tsleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>Resists</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n\t} else if (remainingSleepHp >= targetHpValue) {\n\t\tremainingSleepHp -= targetHpValue;\n\t\tconsole.log(`Sleep Results => Target: ${findTarget.name} |\tHP: ${targetHpValue} | HP Pool: ${remainingSleepHp} | Status: Slept`);\n\t\tsleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>Slept</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n\t\tconst gameRound = game.combat ? game.combat.round : 0;\n\t\tconst effectData = {\n\t\t\tlabel: \"Sleep Spell\",\n\t\t\tname: \"Sleep Spell\",\n\t\t\ticon: \"icons/svg/sleep.svg\",\n\t\t\torigin: args[0].uuid,\n\t\t\tdisabled: false,\n\t\t\tduration: {rounds: 10, seconds: 60, startRound: gameRound, startTime: game.time.worldTime},\n\t\t\tflags: {dae: {specialDuration: [\"isDamaged\"]}},\n\t\t\tchanges: [\n\t\t\t\t// { key: \"macro.CE\", mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM, value: \"Prone\", priority: 20 },\n\t\t\t\t{key: \"macro.CE\", mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM, value: \"Unconscious\", priority: 20},\n\t\t\t],\n\t\t};\n\n\t\tawait MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: findTarget.actor.uuid, effects: [effectData]});\n\t} else {\n\t\tconsole.log(`Sleep Results => Target: ${target.name} | HP: ${targetHpValue} | HP Pool: ${remainingSleepHp - targetHpValue} | Status: Missed`);\n\t\tsleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>misses</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n\t}\n}\nawait wait(500);\nconst sleptResults = `<div><div class=\"midi-qol-nobox\">${sleepTarget.join(\"\")}</div></div>`;\nconst chatMessage = game.messages.get(args[0].itemCardId);\nlet content = duplicate(chatMessage.content);\nconst searchString = /<div class=\"midi-qol-hits-display\">[\\s\\S]*<div class=\"end-midi-qol-hits-display\">/g;\nconst replaceString = `<div class=\"midi-qol-hits-display\"><div class=\"end-midi-qol-hits-display\">${sleptResults}`;\ncontent = await content.replace(searchString, replaceString);\nawait chatMessage.update({content: content});",
            "folder": null,
            "sort": 0,
            "ownership": {
              "default": 0
            },
            "flags": {}
          }
        }
      },
      "effects": [
        {
          "name": "Sleep",
          "icon": "icons/magic/control/sleep-bubble-purple.webp",
          "origin": "Compendium.dnd5e.spells.Item.KhwiSi9fwVfUPtku",
          "duration": {
            "startTime": null,
            "seconds": 60,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "disabled": false,
          "_id": "MowBnXpRu2aG48i9",
          "changes": [],
          "description": "<p>The creature affected by this spell falls Unconscious until the spell ends, the sleeper takes damage, or someone uses an action to shake or slap the sleeper awake.</p>",
          "transfer": false,
          "statuses": [
            "unconscious",
            "incapacitated"
          ],
          "flags": {
            "dae": {
              "selfTarget": null,
              "selfTargetAlways": null
            },
            "plutonium": {
              "dedupeId": "sleep"
            }
          },
          "tint": null,
          "_key": "!actors.items.effects!mIc1vLNUUDRxB0tN.BwdbN3LdxNe6D5D8.MowBnXpRu2aG48i9"
        }
      ],
      "_id": "BwdbN3LdxNe6D5D8",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361906,
        "modifiedTime": 1722770361906,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.BwdbN3LdxNe6D5D8"
    },
    {
      "name": "Darkness",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "230",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>Magical darkness spreads from a point you choose within range to fill a 15-foot-radius sphere for the duration. The darkness spreads around corners. A creature with &amp;Reference[rule=darkvision] can't see through this darkness, and nonmagical light can't illuminate it.</p><div class=\"rd__spc-inline-post\"></div><p>If the point you choose is on an object you are holding or one that isn't being worn or carried, the darkness emanates from the object and moves with it. Completely covering the source of the darkness with an opaque object, such as a bowl or a helm, blocks the darkness.</p><p>If any of this spell's area overlaps with an area of light created by a spell of 2nd level or lower, the spell that created the light is dispelled.</p></div>",
          "chat": ""
        },
        "actionType": "util",
        "level": 2,
        "school": "evo",
        "properties": [],
        "materials": {
          "value": "Bat fur and a drop of pitch or piece of coal",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": null,
          "units": "",
          "type": "self",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": null,
          "units": "self",
          "long": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "ability": "",
        "uses": {
          "value": 0,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "prepared",
          "prepared": false
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/magic/unholy/orb-rays-blue.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "darkness_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        },
        "itemacro": {
          "macro": {
            "data": {
              "_id": null,
              "name": "Darkness",
              "type": "script",
              "author": "Jwooh1sMQvmhHrUO",
              "img": "icons/svg/dice-target.svg",
              "scope": "global",
              "command": "MidiMacros.darkness(args)",
              "folder": null,
              "sort": 0,
              "permission": {
                "default": 0
              },
              "flags": {}
            }
          }
        },
        "dae": {
          "activeEquipped": false,
          "alwaysActive": false
        },
        "midi-qol": {
          "onUseMacroName": "",
          "effectActivation": false
        },
        "dnd5e": {
          "migratedProperties": [
            "vocal",
            "material",
            "concentration"
          ]
        }
      },
      "effects": [
        {
          "name": "Darkness",
          "icon": "icons/magic/unholy/orb-rays-blue.webp",
          "changes": [
            {
              "key": "macro.itemMacro",
              "mode": 0,
              "value": "",
              "priority": 20
            }
          ],
          "disabled": false,
          "duration": {
            "startTime": null,
            "seconds": null,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "origin": null,
          "transfer": false,
          "flags": {
            "dae": {
              "selfTarget": null,
              "selfTargetAlways": null
            },
            "plutonium": {
              "dedupeId": "darkness"
            }
          },
          "_id": "6URqXYM8cSWbMZ53",
          "tint": null,
          "description": "",
          "statuses": [],
          "_key": "!actors.items.effects!mIc1vLNUUDRxB0tN.qVLHCdWYwwLSJ5w8.6URqXYM8cSWbMZ53"
        }
      ],
      "_id": "qVLHCdWYwwLSJ5w8",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770361979,
        "modifiedTime": 1722770361979,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.qVLHCdWYwwLSJ5w8"
    },
    {
      "name": "Invisibility",
      "type": "spell",
      "system": {
        "source": {
          "custom": "",
          "book": "PHB",
          "page": "254",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><p>A creature you touch becomes &amp;Reference[condition=invisible] until the spell ends. Anything the target is wearing or carrying is &amp;Reference[condition=invisible] as long as it is on the target's person. The spell ends for a target that attacks or casts a spell.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"1\"> <span class=\"entry-title-inner\">At Higher Levels.</span></span> <p>When you cast this spell using a spell slot of 3rd level or higher, you can target one additional creature for each slot level above 2nd.</p><div class=\"rd__spc-inline-post\"></div></div><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "actionType": "util",
        "level": 2,
        "school": "ill",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "an eyelash encased in gum arabic",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "target": {
          "value": 1,
          "units": "touch",
          "type": "creature",
          "prompt": true,
          "width": null
        },
        "range": {
          "value": 0,
          "units": "touch",
          "long": null
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "save": {
          "dc": null,
          "scaling": "cha",
          "ability": ""
        },
        "ability": "cha",
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "formula": "",
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "cover": null,
        "crewed": false,
        "summons": null
      },
      "img": "icons/creatures/reptiles/chameleon-camouflage-green-brown.webp",
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "flags": {
        "plutonium": {
          "page": "spells.html",
          "source": "PHB",
          "hash": "invisibility_phb",
          "propDroppable": "spell"
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [
        {
          "name": "Invisibility",
          "icon": "icons/creatures/reptiles/chameleon-camouflage-green-brown.webp",
          "origin": "Compendium.dnd5e.spells.Item.1N8dDMMgZ1h1YJ3B",
          "duration": {
            "startTime": null,
            "seconds": 3600,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "disabled": false,
          "_id": "TeFxBRKYKIXtg6pS",
          "changes": [],
          "description": "<p>The target becomes Invisible until the spell ends. Anything the target is wearing or carrying is invisible as long as it is on the target's person. The spell ends for a target that attacks or casts a spell.</p>",
          "transfer": false,
          "statuses": [
            "invisible"
          ],
          "flags": {
            "dae": {
              "selfTarget": null,
              "selfTargetAlways": null
            },
            "plutonium": {
              "dedupeId": "invisibility"
            }
          },
          "tint": null,
          "_key": "!actors.items.effects!mIc1vLNUUDRxB0tN.uU0ozZ1PY34Hsd82.TeFxBRKYKIXtg6pS"
        },
        {
          "name": "Invisible",
          "icon": "modules/dfreds-convenient-effects/images/invisible.svg",
          "changes": [
            {
              "key": "flags.midi-qol.advantage.attack.all",
              "mode": 0,
              "value": "1",
              "priority": 7
            },
            {
              "key": "flags.midi-qol.grants.disadvantage.attack.all",
              "mode": 0,
              "value": "1",
              "priority": 7
            }
          ],
          "disabled": false,
          "duration": {
            "rounds": null,
            "seconds": 3600,
            "turns": null,
            "startTime": null,
            "combat": null,
            "startRound": null,
            "startTurn": null
          },
          "origin": null,
          "transfer": false,
          "flags": {
            "dfreds-convenient-effects": {
              "isConvenient": true,
              "isDynamic": false,
              "isViewable": true,
              "nestedEffects": [],
              "subEffects": []
            },
            "dae": {
              "specialDuration": [
                "1Attack",
                "1Spell"
              ],
              "selfTarget": null,
              "selfTargetAlways": null
            },
            "plutonium": {
              "dedupeId": "invisible"
            }
          },
          "description": "- An invisible creature is impossible to see without the aid of magic or a special sense. For the purpose of hiding, the creature is heavily obscured. The creature's location can be detected by any noise it makes or any tracks it leaves.<br />- Attack rolls against the creature have disadvantage, and the creature's attack rolls have advantage.",
          "tint": null,
          "statuses": [
            "Convenient Effect: Invisible",
            "invisible"
          ],
          "_id": "w5iWowrKuBMQRxcy",
          "_key": "!actors.items.effects!mIc1vLNUUDRxB0tN.uU0ozZ1PY34Hsd82.w5iWowrKuBMQRxcy"
        }
      ],
      "_id": "uU0ozZ1PY34Hsd82",
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770362039,
        "modifiedTime": 1722770362039,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.uU0ozZ1PY34Hsd82"
    },
    {
      "_id": "MMwI9CKwRZfgRCvx",
      "name": "Innate Spellcasting",
      "type": "feat",
      "system": {
        "source": {
          "custom": "",
          "book": "MM",
          "page": "239",
          "license": ""
        },
        "description": {
          "value": "<div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><span class=\"rd__h rd__h--3\" data-title-index=\"2\"> <span class=\"entry-title-inner\">Innate Spellcasting.</span></span> <p>The oni's innate spellcasting ability is Charisma (spell save DC <span class=\"rd__dc\">13</span>). The oni can innately cast the following spells, requiring no material components:</p><div class=\"rd__spc-inline-post\"></div><ul class=\"rd__list rd__list-hang-notitle\"><li class=\"rd__li  rd__li-spell\"><p>At will: @UUID[Actor.mIc1vLNUUDRxB0tN.Item.qVLHCdWYwwLSJ5w8], @UUID[Actor.mIc1vLNUUDRxB0tN.Item.uU0ozZ1PY34Hsd82]</p></li><li class=\"rd__li  rd__li-spell\"><p>1/day each: @UUID[Actor.mIc1vLNUUDRxB0tN.Item.3nhKXxdhOLvQI5QW], @UUID[Actor.mIc1vLNUUDRxB0tN.Item.PwkFjh1B3mtzaBqZ], @UUID[Actor.mIc1vLNUUDRxB0tN.Item.eE1PTA0djoVgwYjj], @UUID[Actor.mIc1vLNUUDRxB0tN.Item.BwdbN3LdxNe6D5D8]</p></li></ul></div><div class=\"rd__spc-inline-post\"></div></div>",
          "chat": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "range": {
          "units": "",
          "value": null,
          "long": null
        },
        "save": {
          "scaling": "flat",
          "ability": "",
          "dc": null
        },
        "activation": {
          "type": "",
          "cost": null,
          "condition": ""
        },
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "recharge": {
          "charged": false,
          "value": null
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "cover": null,
        "crewed": false,
        "ability": null,
        "actionType": null,
        "formula": "",
        "summons": null,
        "properties": [],
        "requirements": ""
      },
      "ownership": {
        "default": 0,
        "cm8ahpcp3la1d2oY": 3
      },
      "img": "icons/magic/unholy/orb-smoking-green.webp",
      "flags": {
        "plutonium": {
          "page": "monsterSpellcasting",
          "source": "MM",
          "hash": "innate%20spellcasting_oni_mm_mm"
        }
      },
      "effects": [],
      "folder": null,
      "sort": 0,
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1722770362094,
        "modifiedTime": 1722770362094,
        "lastModifiedBy": "cm8ahpcp3la1d2oY"
      },
      "_key": "!actors.items!mIc1vLNUUDRxB0tN.MMwI9CKwRZfgRCvx"
    }
  ],
  "effects": [],
  "folder": "5h8BUy5FJleMK3i5",
  "sort": 0,
  "ownership": {
    "default": 0,
    "cm8ahpcp3la1d2oY": 3
  },
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "3.1.2",
    "coreVersion": "11.315",
    "createdTime": 1722770361076,
    "modifiedTime": 1722771186468,
    "lastModifiedBy": "cm8ahpcp3la1d2oY"
  },
  "_key": "!actors!mIc1vLNUUDRxB0tN"
}
